<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controle de Imagem</title>
  <style>
    body {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }

    #image {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: blue;
    }

    #cenario {
      border: 1px solid black;
      height: 500px;
      width: 500px;
      position: relative;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="cenario">
    <div id="image"></div>
  </div>

  <script>
    const image = document.getElementById('image');
    let x = 0;
    let y = 0;

    function updateImagePosition(gamepad) {
      if (Math.abs(gamepad.axes[0]) > 0.3 || Math.abs(gamepad.axes[1]) > 0.3) {
        // Ajuste dos valores do analógico para a movimentação da imagem
        x += gamepad.axes[0] * 5; // Multiplicador para ajustar a velocidade horizontal
        y += gamepad.axes[1] * 5; // Multiplicador para ajustar a velocidade vertical

        // Verifica se a imagem está dentro dos limites da div cenario
        x = Math.min(Math.max(x, 0), 500 - 50);
        y = Math.min(Math.max(y, 0), 500 - 50);

        image.style.left = `${x}px`;
        image.style.top = `${y}px`;
      }
    }

    function handleGamepad() {
      const gamepads = navigator.getGamepads();
      const gamepad = gamepads[0];

      if (gamepad) {
        updateImagePosition(gamepad);
      }

      requestAnimationFrame(handleGamepad);
    }

    window.addEventListener('gamepadconnected', (event) => {
      console.log(`Gamepad connected at index ${event.gamepad.index}`);
      handleGamepad();
    });

    window.addEventListener('gamepaddisconnected', (event) => {
      console.log(`Gamepad disconnected from index ${event.gamepad.index}`);
    });


  handleGamepad();


  function handleGamepad() {
  const gamepads = navigator.getGamepads();
  const gamepad = gamepads[0]; // ou gamepads[1] para o segundo controle, se estiver conectado

  if (gamepad) {
    // Movimento da imagem
    updateImagePosition(gamepad);

    // Verificação das setas do direcional como botões
    const buttons = gamepad.buttons;

    // Exemplo: Verificar se a seta direcional para a direita (índice 15) está pressionada
    if (buttons[15].pressed) {
      console.log('Seta direcional para a direita pressionada');
      // Faça alguma coisa quando a seta direcional para a direita for pressionada
    }

    // Exemplo: Verificar se a seta direcional para a esquerda (índice 14) está pressionada
    if (buttons[14].pressed) {
      console.log('Seta direcional para a esquerda pressionada');
      // Faça alguma coisa quando a seta direcional para a esquerda for pressionada
    }

    // Exemplo: Verificar se a seta direcional para baixo (índice 13) está pressionada
    if (buttons[13].pressed) {
      console.log('Seta direcional para baixo pressionada');
      // Faça alguma coisa quando a seta direcional para baixo for pressionada
    }

    // Exemplo: Verificar se a seta direcional para cima (índice 12) está pressionada
    if (buttons[12].pressed) {
      console.log('Seta direcional para cima pressionada');
      // Faça alguma coisa quando a seta direcional para cima for pressionada
    }

// Exemplo: Botão A (índice 0)
if (buttons[0].pressed) {
      console.log('Botão A pressionado');
    }

    // Exemplo: Botão X (índice 2)
    if (buttons[2].pressed) {
      console.log('Botão X pressionado');
    }

    // Exemplo: Botão B (índice 1)
    if (buttons[1].pressed) {
      console.log('Botão B pressionado');
    }

    // Exemplo: Botão Y (índice 3)
    if (buttons[3].pressed) {
      console.log('Botão Y pressionado');
    }

    // Exemplo: LB (índice 4)
    if (buttons[4].pressed) {
      console.log('LB pressionado');
    }

    // Exemplo: RB (índice 5)
    if (buttons[5].pressed) {
      console.log('RB pressionado');
    }

   



  }

  requestAnimationFrame(handleGamepad);
}







</script>

</body>
</html>
